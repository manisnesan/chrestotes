<h1 id="tracking-data-and-model-in-machine-learning-projects">Tracking Data and Model in Machine Learning projects</h1>

<h2 id="why-should-you-track-everything">Why should you track everything</h2>

<ul>
  <li>Difference between software engineering and machine learning projects</li>
  <li>code, config, dependencies vs code, data, model, config, dependencies</li>
  <li>Myriad of Data files (raw, intermediate)</li>
  <li>Not in repository</li>
  <li>Reproducible ML models targeting metrics [Experiments Link]</li>
  <li>Tuning and Experimentation tracking</li>
  <li>Model Deployment &amp; Revert</li>
</ul>

<h2 id="dvc">DVC</h2>

<ul>
  <li>
    <p>DVC is built to make ML models shareable and reproducible. It is designed to handle large files, data sets, machine learning models, and metrics as well as code.</p>
  </li>
  <li>Experiments are tracked by combining the Code + Data files</li>
  <li>Data files
    <ul>
      <li>Local cache</li>
      <li>Data remotes in S3, SSH etc</li>
    </ul>
  </li>
  <li>Metrics per experiment</li>
  <li>Pipelines</li>
</ul>

<h3 id="install-dvc-on-fedorarhelcentos">Install DVC on Fedora/RHEL/CentOS</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>wget https://dvc.org/rpm/dvc.repo <span class="nt">-O</span> /etc/yum.repos.d/dvc.repo
<span class="nb">sudo </span>yum update
<span class="nb">sudo </span>yum <span class="nb">install </span>dvc
</code></pre></div></div>

<p>Add DVC files in the Git (It is not required but it is good to have project and dvc config in the same directory)</p>

<h2 id="workflow-for-model-packaging">Workflow for Model Packaging</h2>

<ul>
  <li>Setup for connecting to model repository during training development process</li>
  <li>Push the trained model to the repository</li>
  <li>Pull the model from the repository during the build process</li>
</ul>

<h3 id="pushing-model-files">Pushing model files</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dvc init
dvc remote add <span class="nt">-d</span> gss-rdu-remote ssh://msivanes@gss-rdu-repo.usersys.redhat.com:/var/www/html/repo/config/ulmfit

dvc add cases_small_sbr_08-06-2020.pkl
git commit <span class="nt">-am</span> “Add ulmfit model to project”
dvc push <span class="nt">-v</span>
</code></pre></div></div>

<h3 id="pulling-the-model">Pulling the model</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone <span class="nv">$REPO</span>
git pull
dvc pull <span class="c"># Pulls the data from remote-storage. Equivalent to dvc fetch followed by dvc checkout</span>
dvc checkout <span class="c">#Update model files</span>
</code></pre></div></div>

<h2 id="food-for-thought">Food for thought</h2>

<ul>
  <li>Rather than feature branches, think in terms of experiment branches targeting metrics.</li>
  <li>Keep Data and Model files stored outside the repository</li>
  <li>Model files built as part of build process.</li>
  <li>Smoke test should validate the constructed model using validation set.</li>
</ul>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://dvc.org/doc">DVC</a></li>
  <li><a href="https://www.globalsqa.com/dvc-cheat-sheet/">Cheatsheet</a></li>
  <li>https://christophergs.github.io/machine%20learning/2019/05/13/first-impressions-of-dvc/</li>
  <li>https://www.slideshare.net/DmitryPetrov15/pydata-berlin-2018-dvcorg</li>
</ul>
